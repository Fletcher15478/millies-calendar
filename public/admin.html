<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Millies - Admin Panel</title>
    <link rel="icon" type="image/svg+xml" href="images/cone pink.svg">
    <link rel="apple-touch-icon" href="images/cone pink.svg">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="admin-page">
    <div class="page-wrapper admin-page-wrapper">
        <div class="container">
            <!-- Login Form -->
            <div id="login-section" class="login-section">
                <div class="login-container">
                    <img src="images/millies-logo.png" alt="Millie's" class="admin-logo">
                    <h1 class="uppercase-title">Admin Login</h1>
                    <form id="login-form" class="login-form">
                        <div class="form-group">
                            <label for="login-username">Username</label>
                            <input type="email" id="login-username" required autocomplete="username">
                        </div>
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input type="password" id="login-password" required autocomplete="current-password">
                        </div>
                        <div id="login-error" class="error-message" style="display: none;"></div>
                        <button type="submit" class="btn-primary">Login</button>
                    </form>
                    <div class="login-divider">
                        <span>OR</span>
                    </div>
                    <a href="/api/auth/google" class="btn-google">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.64 9.20454C17.64 8.56636 17.5827 7.95272 17.4764 7.36363H9V10.845H13.8436C13.635 11.97 13.0009 12.9231 12.0477 13.5613V15.8195H15.9564C17.1882 14.2527 17.64 11.9454 17.64 9.20454Z" fill="#4285F4"/>
                            <path d="M9 18C11.43 18 13.467 17.1941 14.9564 15.8195L12.0477 13.5613C11.2418 14.1013 10.2109 14.4204 9 14.4204C6.65454 14.4204 4.67182 12.8372 3.96409 10.71H0.957275V13.0418C2.43818 15.9831 5.48182 18 9 18Z" fill="#34A853"/>
                            <path d="M3.96409 10.71C3.78409 10.17 3.68182 9.59318 3.68182 9C3.68182 8.40681 3.78409 7.83 3.96409 7.29V4.95818H0.957273C0.347727 6.17318 0 7.54772 0 9C0 10.4523 0.347727 11.8268 0.957273 13.0418L3.96409 10.71Z" fill="#FBBC05"/>
                            <path d="M9 3.57955C10.3214 3.57955 11.5077 4.03364 12.4405 4.92545L15.0218 2.34409C13.4632 0.891818 11.4259 0 9 0C5.48182 0 2.43818 2.01682 0.957275 4.95818L3.96409 7.29C4.67182 5.16273 6.65454 3.57955 9 3.57955Z" fill="#EA4335"/>
                        </svg>
                        <span>Sign in with Google</span>
                    </a>
                </div>
            </div>

            <!-- Admin Panel (hidden until logged in) -->
            <div id="admin-panel" class="admin-section" style="display: none;">
                <header>
                    <div class="admin-header-top">
                        <img src="images/millies-logo.png" alt="Millie's" class="admin-logo">
                        <h1 class="uppercase-title">Admin Panel</h1>
                        <button id="logout-btn" class="btn-secondary logout-btn">Logout</button>
                    </div>
                </header>
                <div class="admin-welcome">
                    <div class="welcome-icon">üëã</div>
                    <h2 class="welcome-title">Welcome, Fletcher!</h2>
                    <p class="welcome-subtitle">Manage your events with ease</p>
                </div>
                
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-info">
                            <div class="stat-number" id="total-events">0</div>
                            <div class="stat-label">Total Events</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-info">
                            <div class="stat-number" id="featured-events">0</div>
                            <div class="stat-label">Featured</div>
                        </div>
                    </div>
                </div>

                <div class="admin-header-section">
                    <h2 class="section-title">Event Management</h2>
                    <p class="section-description">Create, edit, and organize your calendar events</p>
                </div>

                <div class="admin-controls">
                    <button id="add-event-btn" class="btn-primary btn-add-event">
                        <span class="btn-icon">‚ûï</span>
                        <span>Add New Event</span>
                    </button>
                    <button id="import-csv-btn" class="btn-primary btn-import-csv">
                        <span class="btn-icon">üì•</span>
                        <span>Import CSV</span>
                    </button>
                </div>

                <!-- CSV Import Modal -->
                <div id="csv-import-modal" class="modal">
                    <div class="modal-content">
                        <span class="close csv-close">&times;</span>
                        <h2>Import Events from CSV</h2>
                        <div class="csv-instructions">
                            <p><strong>CSV Format:</strong> Your CSV file should have the following columns:</p>
                            <ul>
                                <li><code>title</code> (required) - Event title</li>
                                <li><code>date</code> (required) - Date in YYYY-MM-DD format (e.g., 2024-11-20)</li>
                                <li><code>time</code> (required) - Time in HH:MM format (24-hour, e.g., 14:30)</li>
                                <li><code>description</code> (required) - Event description</li>
                                <li><code>location</code> (optional) - Event location</li>
                                <li><code>featured</code> (optional) - true/false</li>
                                <li><code>outside</code> (optional) - true/false</li>
                                <li><code>publicEvent</code> (optional) - true/false</li>
                                <li><code>petFriendly</code> (optional) - true/false</li>
                            </ul>
                            <p><strong>Example:</strong></p>
                            <pre>title,date,time,description,location,featured,outside,publicEvent,petFriendly
Ice Cream Social,2024-11-20,14:00,Join us for ice cream!,123 Main St,true,false,true,false</pre>
                        </div>
                        <form id="csv-import-form">
                            <div class="form-group">
                                <label for="csv-file">Select CSV File *</label>
                                <input type="file" id="csv-file" accept=".csv" required>
                            </div>
                            <div id="csv-import-progress" class="csv-progress" style="display: none;">
                                <div class="progress-bar">
                                    <div id="progress-fill" class="progress-fill"></div>
                                </div>
                                <p id="progress-text">Processing...</p>
                            </div>
                            <div id="csv-import-results" class="csv-results" style="display: none;"></div>
                            <div class="form-actions">
                                <button type="submit" class="btn-primary">Import Events</button>
                                <button type="button" class="btn-secondary" id="cancel-csv-btn">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Event Form Modal -->
                <div id="event-modal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2 id="modal-title">Add New Event</h2>
                        <form id="event-form">
                            <input type="hidden" id="event-id">
                            
                            <div class="form-group">
                                <label for="event-title">Event Title *</label>
                                <input type="text" id="event-title" required>
                            </div>

                            <div class="form-group">
                                <label for="event-date">Date *</label>
                                <input type="date" id="event-date" required>
                            </div>

                            <div class="form-group">
                                <label for="event-time">Time *</label>
                                <div class="time-selector">
                                    <select id="event-hour" required>
                                        <option value="">Hour</option>
                                        <option value="01">1</option>
                                        <option value="02">2</option>
                                        <option value="03">3</option>
                                        <option value="04">4</option>
                                        <option value="05">5</option>
                                        <option value="06">6</option>
                                        <option value="07">7</option>
                                        <option value="08">8</option>
                                        <option value="09">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                    </select>
                                    <span class="time-separator">:</span>
                                    <select id="event-minute" required>
                                        <option value="">Minute</option>
                                        <option value="00">00</option>
                                        <option value="15">15</option>
                                        <option value="30">30</option>
                                        <option value="45">45</option>
                                    </select>
                                    <select id="event-ampm" required>
                                        <option value="AM">AM</option>
                                        <option value="PM">PM</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="event-featured">
                                    <span>Featured Event (appears at top of calendar)</span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="event-outside">
                                    <span>Outside Event</span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="event-public">
                                    <span>Public Event</span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="event-pet-friendly">
                                    <span>Pet Friendly</span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label for="event-description">Description *</label>
                                <textarea id="event-description" rows="4" required></textarea>
                            </div>

                            <div class="form-group">
                                <label for="event-location">Location (optional - will link to Google Maps)</label>
                                <input type="text" id="event-location" placeholder="e.g., 123 Main St, City, State">
                            </div>

                            <div class="form-group">
                                <label for="event-photo">Photo</label>
                                <input type="file" id="event-photo" accept="image/*">
                                <div id="photo-preview" class="photo-preview"></div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn-primary">Save Event</button>
                                <button type="button" class="btn-secondary" id="cancel-btn">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Events List -->
                <div id="admin-events-container" class="admin-events-container">
                    <div class="loading">Loading events...</div>
                </div>
            </div>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>

